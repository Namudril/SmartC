<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="mystyle.css">
<style>
        textarea {
            width: 100%;
            height=50px;
            padding: 5px 5px 5px 5px;
            min-height: 75px;
        }
</style>
<script src="tokenizer.js"></script>
<script src="parser.js"></script>
<script src="verifier.js"></script>
<script src="syntax.js"></script>
<script src="generator.js"></script>
<script src="testcases.js"></script>

<script>

function compileCode(){

    var codeString = document.getElementById("source-code").value;
    try{
        var token_output = tokenizer(codeString);
        var parser_output = parser(token_output);
        verify(parser_output);
        var synctactic_out = createSyntacticTree(parser_output);
        var asmCode = codeGenerator(synctactic_out, true);

        document.getElementById("machine-code").innerHTML = asmCode+JSON.stringify(synctactic_out, null, '    ');
    }catch (e) {
        document.getElementById("machine-code").innerHTML = e.stack+JSON.stringify(synctactic_out, null, '    ');;
    }
}


function testCode() {
    document.getElementById("machine-code").innerHTML = runTestCases();    
}


</script>
</head>
<body>


    <div>
        <h1>Burstcoin AT Javascript Compiler</h1>
        <h3>Write here your aritmetic expression:</h3>
        <textarea id="source-code"></textarea>
        <button id="compile" onClick="javascript: compileCode();">Compile it!</button>
        <button id="test" onClick="javascript: testCode();">Run test cases</button>

        <pre id="machine-code" height="400" contenteditable="true"></pre>
    </div>


</body>
</html>
