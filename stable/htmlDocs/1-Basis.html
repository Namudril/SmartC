<!DOCTYPE html>
<html>
  <head>
    <style>
      /*! ADAPTED
    Typeplate : Starter Kit
    URL ........... http://typeplate.com
    Version ....... 3.0.2
    Github ........ https://github.com/typeplate/starter-kit
    Authors ....... Dennis Gaebel (@gryghostvisuals) & Zachary Kain (@zakkain)
    License ....... Creative Commmons Attribution 3.0
    License URL ... https://github.com/typeplate/starter-kit/blob/master/license.txt
    */

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        text-rendering: optimizeLegibility;
        line-height: 1;
        margin-top: 0;
        color: #222;
      }

      blockquote + figcaption cite {
        display: block;
        font-size: inherit;
        text-align: right;
      }

      body {
        word-wrap: break-word;
      }

      pre code {
        word-wrap: normal;
      }

      body {
        -webkit-hyphens: auto;
        -ms-hyphens: auto;
        hyphens: auto;
        color: #444;
      }

      h1 {
        font-size: 2em;
        /* 2*16 = 32 */
      }

      h2 {
        font-size: 1.5em;
        /* 1.5*16 = 24 */
      }

      h3 {
        font-size: 1.17em;
        /* 1.17*16 = 18.72 */
      }

      h4 {
        font-size: 1em;
        /* 1*16 = 16 */
      }

      h5 {
        font-size: 0.83em;
        /* 0.83*16 = 13.28 */
      }

      h6 {
        font-size: 0.75em;
        /* 0.75*16 = 12 */
      }

      h1 {
        margin: 2.42424rem 0 1.454544rem;
      }

      h2 {
        margin: 2.0202rem 0 1.21212rem;
      }

      h3 {
        margin: 1.61616rem 0 1rem;
      }

      h4 {
        margin: 1.21212rem 0 1;
      }

      h5 {
        margin: 0.80808rem 0;
      }

      h6 {
        margin: 0.70707rem 0;
      }

      p {
        margin: auto auto 1.5rem;
      }

      small {
        font-size: 65%;
      }

      input,
      abbr,
      acronym,
      blockquote,
      code,
      kbd,
      q,
      samp,
      var {
        -webkit-hyphens: none;
        -ms-hyphens: none;
        hyphens: none;
      }

      pre {
        white-space: pre;
      }

      pre code {
        white-space: -moz-pre-wrap;
        white-space: pre-wrap;
      }

      code {
        white-space: pre;
        font-family: SF Mono, Consolas, Dejavu Sans Mono, Menlo, monospace;
      }

      abbr {
        -webkit-font-variant: small-caps;
        -moz-font-variant: small-caps;
        -ms-font-variant: small-caps;
        font-variant: small-caps;
        font-weight: 600;
        text-transform: lowercase;
        color: gray;
      }

      abbr[title]:hover {
        cursor: help;
      }

      /* FROM http://purecss.io/layouts/side-menu/  adapted to remove pure classes*/

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
        color: #444;
      }

      img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: auto;
      }

      code,
      pre {
        background-color: #f5f5f5;
        color: #444;
        border-radius: 2px;
        text-shadow: 0px 1px 0px white;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
      }

      pre code {
        border: none;
        box-shadow: none;
      }

      pre {
        padding: 0.5em;
      }

      code {
        display: inline-block;
        padding: 0 0.5em;
        line-height: 1.4;
        font-size: 0.9em;
      }

      table {
        border-spacing: 0;
        margin-bottom: 1.5rem;
      }

      table th,
      table td {
        padding: 0.3em 0.7em;
      }

      table th {
        background-color: #f4f4f4;
        border-bottom: 2px solid #444;
      }

      table td {
        border: 1px solid #f5f5f5;
      }

      /* Add transition to containers so they can push in and out. */

      #layout,
      #menu,
      .menu-link {
        -webkit-transition: all 0.2s ease-out;
        -moz-transition: all 0.2s ease-out;
        -ms-transition: all 0.2s ease-out;
        -o-transition: all 0.2s ease-out;
        transition: all 0.2s ease-out;
      }

      /* This is the parent `<div>` that contains the menu and the content area. */

      #layout {
        position: relative;
        padding-left: 0;
      }

      #layout.active #menu {
        left: 250px;
        width: 250px;
      }

      #layout.active .menu-link {
        left: 250px;
      }

      /* The content `<div>` is where all your content goes. */

      .content {
        margin: 50px auto;
        padding: 0 2em;
        max-width: 80ex;
        line-height: 1.6em;
      }

      /*
      The `#menu` `<div>` is the parent `<div>` that contains the menu that
      appears on the left side of the page.
      */

      #menu {
        margin-left: -250px;
        /* "#menu" width */
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 1000;
        /* so the menu or its navicon stays above all content */
        background: #f4f4f4;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        font-size: 0.9em;
      }

      @media print {
        #menu,
        .menu-link {
          display: none !important;
        }
      }

      a,
      a * {
        text-decoration: none;
        color: #2483cc;
      }

      a:visited {
        text-decoration: none;
        color: #2483cc;
      }

      /* All anchors inside the menu should be styled like this. */

      #menu a {
        display: block;
        padding: 0.5em 0.5em;
      }

      #menu a:first-letter {
        text-transform: capitalize;
      }

      #menu ul {
        list-style-type: none;
        padding: 0;
        margin: 1em 0.5em;
      }

      #menu ul ul {
        margin-top: 0.5em;
        margin-left: 0.5em;
        border-left: 4px solid rgba(255, 255, 255, 0.5);
      }

      /* Change color of the anchor links on hover/focus. */

      #menu li a:hover,
      #menu li a:focus {
        background: rgba(255, 255, 255, 0.4);
      }

      /* This styles the selected menu item `<li>`. */

      #menu li a.active {
        background: rgba(0, 0, 0, 0.05);
      }

      /* This styles a link within a selected menu item `<li>`. */

      #menu li a.active {
        color: #222;
      }

      /* This styles the menu heading. */

      #menu li.heading {
        font-size: 0.9em;
        text-transform: uppercase;
        color: #000;
      }

      #menu li.heading > * {
        padding: 0.5em;
        display: block;
      }

      #menu li.heading a {
        color: #0c68af;
      }

      /* -- Dynamic Button For Responsive Menu -------------------------------------*/

      /*
      `.menu-link` represents the responsive menu toggle that shows/hides on
      small screens.
      */

      .menu-link {
        position: fixed;
        display: block;
        /* show this only on small screens */
        top: 0;
        left: 0;
        /* "#menu width" */
        font-size: 10px;
        /* change this value to increase/decrease button size */
        z-index: 10;
        width: 2em;
        height: auto;
        padding: 1.6em 1.2em;
        border-radius: 0 2px 2px 0;
      }

      .menu-link:hover {
        background: #f4f4f4;
      }

      .menu-link span {
        position: relative;
        display: block;
      }

      .menu-link span,
      .menu-link span:before,
      .menu-link span:after {
        background-color: #555;
        width: 100%;
        height: 0.2em;
        border-radius: 1em;
      }

      .menu-link span:before,
      .menu-link span:after {
        position: absolute;
        margin-top: -0.6em;
        content: " ";
      }

      .menu-link span:after {
        margin-top: 0.6em;
      }

      /* Hides the menu at `48em`, but modify this based on your app's needs. */

      @media (min-width: 48em) {
        .header,
        .content {
          padding-left: 2em;
          padding-right: 2em;
        }

        #layout {
          padding-left: 250px;
          /* left col width "#menu" */
          left: 0;
        }
        #menu {
          left: 250px;
        }

        .menu-link {
          position: fixed;
          left: 250px;
          display: none;
        }

        #layout.active .menu-link {
          left: 250px;
        }
      }

      @media (max-width: 48em) {
        /* Only apply this when the window is small. Otherwise, the following case results in extra padding on the left:
         * Make the window small.
         * Tap the menu to trigger the active state.
         * Make the window large again.
         */
        #layout.active {
          position: relative;
          left: 250px;
        }
      }

      /* Heading anchors and permalinks */
      h1[id],
      h2[id],
      h3[id],
      h4[id],
      h5[id],
      h6[id] {
        position: relative;
      }
      .heading-anchor-permalink {
        /* Position the permalink to the left of the title */
        position: absolute;
        right: 100%;
        /* Add some spacing as padding to not lose the hover */
        padding-right: 0.6rem;
        /* Make it only visible on heading hover, see below */
        opacity: 0;
      }
      h1[id]:hover .heading-anchor-permalink,
      h2[id]:hover .heading-anchor-permalink,
      h3[id]:hover .heading-anchor-permalink,
      h4[id]:hover .heading-anchor-permalink,
      h5[id]:hover .heading-anchor-permalink,
      h6[id]:hover .heading-anchor-permalink {
        opacity: 0.5;
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
  </head>

  <body>
    <div id="layout">
      <!-- Menu toggle -->
      <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
      </a>
      <nav id="menu">
        <ul>
<li><a class="" href="index.html">index</a></li>
<li><a class="active" href="1-Basis.html">Basis</a></li>
<li><a class="" href="2-Deeper-into-SmartC.html">Deeper into SmartC</a></li>
<li><a class="" href="3-Learning-with-examples.html">Learning with examples</a></li>
<li><a class="" href="4-Functions-repository.html">Functions repository</a></li>
<li><a class="" href="5-Comprehensive-example.html">Comprehensive example</a></li>
<li><a class="" href="6-SmartC-object-structure.html">SmartC object structure</a></li>
</ul>
      </nav>
      <article id="main" class="content">
        <p><a href="./">Back</a></p>
<h2 id="language-rules">Language rules <a class="heading-anchor-permalink" href="#language-rules">#</a></h2>
<p>Expressions are C-like and evaluated from left to right. Rules are simpler than in C, so complexes expressions may have different evaluations from C, but simple expressions shall have same outcome given special characteristics in Signum assembly language (derived from CIYAM).</p>
<h3 id="comments">Comments <a class="heading-anchor-permalink" href="#comments">#</a></h3>
<p>As C, can be one line <code>//</code> or multi-line <code>/* .... */</code>;</p>
<h3 id="keywords">Keywords <a class="heading-anchor-permalink" href="#keywords">#</a></h3>
<p>Some keywords have the same meaning and use in C: <code>asm</code>, <code>break</code>, <code>continue</code>, <code>do</code>, <code>else</code>, <code>for</code>, <code>goto</code>, <code>if</code>, <code>long</code>, <code>return</code>, <code>struct</code>, <code>void</code>, <code>while</code>. Note differences for keywords:</p>
<ul>
<li><code>const</code>: Actually this will tell compiler to set a value to a variable at the contract creation. No problem setting it a value and then changing it later. It can be used during variable declaration or later, but it can be set only once. Using const can reduce the number of codepages of your program. Examples: <code>const long i=5;</code> to seta long; <code>long a[4]; const a[0]=5;</code> to set values for array.</li>
</ul>
<p>There are also additional keywords:</p>
<ul>
<li><code>sleep N</code>: Puts the contract in ‘sleep’ mode during N blocks. Argument N must be specified and can be an expression. <code>sleep 1;</code> makes your contract to stop being processed at current block and resumes it at next one.</li>
<li><code>exit</code>: Puts the contract in ‘stop’ mode and set program to restart from main function (‘finished’ mode). It will be inactive until a new transaction is received. Once a tx is received, it will start execution at <code>void main(void)</code> function. Takes no argument. If contract activation amount is zero, contract will resume execution on next block.</li>
<li><code>halt</code>: Puts the contract in ‘stop’ mode. It will be inactive until a new transaction is received, then resume execution at next instruction. Takes no argument. If contract activation amount is zero, contract will resume execution on next block.</li>
<li>Side note: There also state ‘frozen’ when a contract execution is suspended because there is no more balance in contract account (no gas!) and ‘dead’ when there is an exception like 1) division by zero; 2) trying to read/set a variable outside memory range; 3) stack overflow for user/code stack. When a contract dies, all balance is lost forever.</li>
</ul>
<p>Others keyword have no assembly support. They are disabled: <code>auto</code>, <code>double</code>, <code>float</code>, <code>register</code>, <code>volatile</code>.
For future implementation these keywords can be added: <code>case</code>, <code>char</code>, <code>default</code>, <code>enum</code>, <code>extern</code>, <code>int</code>, <code>short</code>, <code>sizeof</code>, <code>signed</code>, <code>static</code>, <code>switch</code>, <code>typedef</code>, <code>union</code>, <code>unsigned</code>.</p>
<h3 id="macros">Macros <a class="heading-anchor-permalink" href="#macros">#</a></h3>
<p>Some special features can be enabled/disable via preprocessor directives:</p>
<ul>
<li><code>#program name YourProgramName</code>: Set program’s name. Only regular letters and numbers allowed, max 30 chars in length.</li>
<li><code>#program description Your program description</code>: Set program’s description. No new lines and max length is 1000 chars.</li>
<li><code>#program activationAmount 100000000</code>: Set program’s activation amount in NQT (1 Burst = 100000000 NQT). If an incoming transaction has an amount is less than this value, it will not be processed by program (but the amount will be received!). Set a low value but bigger than worst case amount needed to run in your program. If set too low, your program will be frozen during execution (out of gas). If set too high, program balance will be high after execution (unburned balance). Remember to handle this case if creating serious program!</li>
<li><code>#include APIFunctions [true/false/1/0/]</code>: Can make Burstcoin API functions available for use as functions. Default value is <code>false</code>. Can be enabled by declaring it with empty argument, <code>true</code> or <code>1</code>. Function names follow the <a href="https://ciyam.org/at/at_api.html">ciyam at documentation</a>.</li>
<li><code>#pragma enableRandom [true/false/1/0/]</code>: Makes labels for jumps and conditionals receive a random value. Default value is <code>false</code>. Default behaviour is labels having an increasing number starting with 1 (number is base 36).</li>
<li><code>#pragma enableLineLabels [true/false/1/0/]</code>: Adds line number to labels in assembly. Only usefull for debug purposes. Default value is <code>false</code>.</li>
<li><code>#pragma globalOptimization [true/false/1/0/]</code>: Adds a final step to the compiler where generated code will be optimized. Default value is <code>false</code> until more test are done. Makes generated assembly code even less readable, removing labels not referenced by jumps.</li>
<li><code>#pragma maxAuxVars N</code>: Used to tell compiler how many auxiliary variables will be available (they are used as registers). Default value is <code>5</code>, min value is <code>1</code> and max is <code>10</code>. If you are under memory pressure, try to reduce to minimal necessary for compiling. Simple contracts will use around 2 values, but this number depends on nested operations.</li>
<li><code>#pragma maxConstVars N</code>: Compiler will create variable from 1 to maxConstVars. Variables will be named ‘n1’, ‘n2’, … ‘n10’. It is very usefull to use togheter to ‘globalOptimization’, because global optimization will change all numbers references to these variables and optimize code, making code much much smaller! Default min value is <code>0</code> (deactivated) and max is <code>10</code>.</li>
<li><code>#pragma reuseAssignedVar [true/false/1/0/]</code>: When set, compiler will try to use a variable on left sign of and <code>Assignment</code> as a register. If variable is also used on right side, the compiler will not reuse it. This can save one assembly instruction for every expression used! Default value is <code>true</code> and it is highly recomended to maintain it active.</li>
<li><code>#pragma useVariableDeclaration [true/false/1/0/]</code>: Makes the compiler to check if all variables are declared before their use. Default value is <code>true</code>. When false, default assembler behaviour is create variables as they appears. Good to avoid typing errors. Must be on when using arrays and structs.</li>
<li><code>#pragma version N</code>: Informs which compiler’s version the code was developed. Must be set if not using development version.</li>
<li><code>#pragma warningToError [true/false/1/0/]</code>: All warnings to compiler errors. Default value is <code>true</code>. Warning messages begin with WARNING, other ones are actualy errors.</li>
</ul>
<h3 id="variables">Variables <a class="heading-anchor-permalink" href="#variables">#</a></h3>
<p>At the moment, only <code>long</code> values are implemented. User can assign them with decimal values (default) <code>i=2;</code>, hexadecimal values <code>i=0xff;</code>, strings (up to 8 bytes) <code>msg=&quot;Hello!&quot;;</code> or Signum addresses <code>addr=&quot;S-297Z-EKMN-4AVV-7YWXP&quot;;</code> (or starting with BURST or TS). Long values can be assigned during their declaration.
Arrays can be declared but shall be initialized element by element. They can only be used if <code>useVariableDeclaration</code> is true. Declaration of an array with 5 elements (0 to 4): <code>long arr[5];</code>. Use as in C: <code>arr[1]=4;</code>. Multi-long values can be set <code>arr[]='This is a text message';</code> but not during declaration.
Structs use same notation in C. Structs pointers can also be used. To access a member, use <code>.</code> or <code>-&gt;</code> depending if struct is already allocated in memory  or if it is a pointer to the memory location. Arrays of structs and arrays inside structs are also supported, but not nested structs.
All variables are initialized with value <code>0</code> at the first time the contract is executed, unless value was set by <code>const</code> statement.
All variables are similar to <code>static</code> in C. So every time a function is called or the smart contract receives a transaction, all variables will have their last value. To avoid this behavior, declare variables setting them a initial value: <code>long i=0;</code>.
Global variables are available in all functions. Functions variables can only be used inside the function.
Variables declarations can not be inside other sentences, like <code>for (long i; i&lt;10; i++)</code> or <code>if (a){ long i=0; ...}</code>.</p>
<h3 id="functions">Functions <a class="heading-anchor-permalink" href="#functions">#</a></h3>
<p>As available in C, the developer can make use of functions to make coding easier or reuse code from other projects. There is no need to put function prototypes at the beginning, the function can be used before it is declared, because theirs definitions are collected a step before the compiling process. Functions arguments and return values are passed using user stack (16 variables if only one page is set during smart contract deployment). Recursive functions are not allowed. There is a special function <code>void main(void)</code> that defines the starting point when a new transaction is received, but it is not obligatory. If no function is used (or only main() is used), there is no need for user stack pages.</p>
<h3 id="global-statements">Global statements <a class="heading-anchor-permalink" href="#global-statements">#</a></h3>
<p>All global statements are grouped at the beginning of assembly code (even if after functions or end of file). When the contracted is executed first time, it does not begin at main function, but will start at the beginning of file and run all global statements. If there is a main function, it will be then executed during this first run. If you stop execution in global statements (with <code>exit</code>), the main function will not be processed and it will not set starting point for new transactions (asm code <code>PCS</code>), leading your contract to finished state forever. In this case (not using main function) use <code>halt</code>keyword to wait next transaction.</p>
<h3 id="designing-tips">Designing tips <a class="heading-anchor-permalink" href="#designing-tips">#</a></h3>
<p>If you plan to use a number many times, declare it globally and use in your code. This can save one instruction for each constant used and also make your code smaller. Example: <code>long n0xff=0xff; if (x==n0xff)...</code> But if you use it only a few times, or is under memory pressure, you can use constants at your code but making it bigger. For big programs it is more common be under codesize pressure, so this is a great exchange. The exception is Zero. Setting a variable to zero has an special assembly code. Comparisons against zero are also smaller than comparisons against variables. Comparisons against numbers are long assembly instrunctions. Try it to see assembly code genereated! If you are under memory pressure (or want to code smallest code possible) use global variables, because exchanging variables thru functions will cause they to be declared twice, pushed onto stack and popped at function.</p>
<h2 id="notes">Notes <a class="heading-anchor-permalink" href="#notes">#</a></h2>
<ul>
<li>Run testcases to check tested operations. It shall be no failed cases in red.</li>
<li>Please report a bug if any strange behavior is found.</li>
</ul>
<p><a href="./">Back</a></p>

      </article>
    </div>
    <script>
      // Load contents.json if you need it
    </script>
    <script>
      // FROM http://purecss.io/js/ui.js
      (function(window, document) {
        var layout = document.getElementById("layout"),
          menu = document.getElementById("menu"),
          menuLink = document.getElementById("menuLink");

        function toggleClass(element, className) {
          var classes = element.className.split(/\s+/),
            length = classes.length,
            i = 0;

          for (; i < length; i++) {
            if (classes[i] === className) {
              classes.splice(i, 1);
              break;
            }
          }
          // The className is not found
          if (length === classes.length) {
            classes.push(className);
          }

          element.className = classes.join(" ");
        }

        menuLink.onclick = function(e) {
          var active = "active";

          e.preventDefault();
          toggleClass(layout, active);
          toggleClass(menu, active);
          toggleClass(menuLink, active);
        };
      })(this, this.document);
    </script>
  </body>
</html>
